<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Election</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Custom Styles -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 text-gray-800" data-theme="light">
    <div class="background-wrapper">
        <ul class="animated-cubes">
            <li class="cube"></li>
            <li class="cube circle"></li>
            <li class="cube"></li>
            <li class="cube triangle"></li>
            <li class="cube"></li>
            <li class="cube circle"></li>
            <li class="cube"></li>
            <li class="cube triangle"></li>
            <li class="cube"></li>
            <li class="cube circle"></li>
            <li class="cube"></li>
            <li class="cube"></li>
        </ul>
    </div>
    <!-- Initial Login Section -->
    <div id="initial-login-section" class="initial-login-container with-animation">

        <div class="initial-login-card">
            <h2 class="text-3xl font-bold mb-6 text-gray-800">Welcome to Minecraft Election</h2>
            <div id="login-form-container">
                <p class="mb-6 text-gray-600">Please enter your unique Voting ID to proceed.</p>
                <input type="text" id="voting-id-input-initial" placeholder="Enter Voting ID" class="input-field w-full mb-4">
                <button id="voting-id-login-btn-initial" class="action-button w-full">Login</button>
            </div>
            <div id="login-loading-animation" class="loading-wrapper hidden">
                <div class="loading-animation">
                    <div class="loading-bar"></div>
                    <div class="loading-bar"></div>
                    <div class="loading-bar"></div>
                    <div class="loading-bar"></div>
                </div>
                <p class="loading-text">Checking Voting ID...</p>
            </div>
        </div>
    </div>

    <!-- Main Application Container -->
    <div id="main-app-container" class="hidden app-container">
        <!-- Header with Title -->
        <div class="flex justify-between items-center mb-6 pb-4 border-b border-gray-200">
            <h1 class="text-3xl font-bold text-blue-700">Minecraft Election</h1>
            <button id="theme-toggle" class="action-button">
                <span class="icon">ðŸŒ™</span> Dark Mode
            </button>
        </div>

        <div class="flex flex-col lg:flex-row gap-6 w-full">
            <!-- Main Content Area for Tabs -->
            <div class="main-content-area flex-grow">
                <!-- Tab Navigation -->
                <nav class="tab-navigation flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 mb-8">
                    <div id="tab-vote" class="tab-item active">Vote</div>
                    <div id="tab-candidate-login" class="tab-item">Candidate Login</div>
                    <div id="tab-register-candidate" class="tab-item">Register Candidate</div>
                </nav>

                <!-- Tab Content: Vote Section -->
                <div id="content-vote" class="tab-content">
                    <h2 class="text-3xl font-bold mb-6 text-gray-800">Cast Your Vote</h2>
                    <div id="vote-section-details">
                        <div id="voting-disabled-message" class="hidden text-center p-8 bg-red-100 border border-red-300 rounded-xl mb-8 text-red-700">
                            <p class="text-xl font-semibold">
                                This Voting ID has already been used. You cannot cast another vote.
                            </p>
                            <p class="text-sm mt-2">You can still view live vote counts and candidate information.</p>
                        </div>

                        <div id="player-info-display" class="mb-6 p-6 bg-blue-50 border border-blue-200 rounded-xl shadow-inner text-blue-800">
                            <h3 class="text-xl font-semibold mb-4">Your Voting Account Details:</h3>
                            <p class="mb-2"><strong>Minecraft Name:</strong> <span id="display-minecraft-name"></span></p>
                            <p><strong>Game Edition:</strong> <span id="display-game-edition"></span></p>
                            <p class="text-sm text-blue-600 mt-2">
                                <span id="bedrock-hint" class="hidden">For Bedrock Edition, your username might include a dot (e.g., `Player.Name`). Please ensure it matches your in-game name.</span>
                            </p>
                        </div>

                        <!-- New Optional Details Section -->
                        <div class="mb-6 p-4 bg-gray-50 rounded-lg shadow-sm">
                            <h3 class="text-lg font-semibold mb-3 text-gray-700">Optional Details:</h3>
                            <div class="mb-4">
                                <label for="real-name-input" class="block text-sm font-medium text-gray-700 mb-1">Your Real Name (Optional):</label>
                                <input type="text" id="real-name-input" placeholder="e.g., John Doe" class="input-field w-full">
                            </div>
                            <div class="mb-4">
                                <label for="contact-info-input" class="block text-sm font-medium text-gray-700 mb-1">Discord/WhatsApp/Instagram (Optional):</label>
                                <input type="text" id="contact-info-input" placeholder="e.g., @yourdiscord, +1234567890" class="input-field w-full">
                            </div>
                            <div id="entered-details-display" class="mt-4 p-3 bg-white border border-gray-200 rounded-md hidden">
                                <p class="text-sm font-medium text-gray-600">Entered Details:</p>
                                <p id="display-real-name" class="text-sm text-gray-800"></p>
                                <p id="display-contact-info" class="text-sm text-gray-800"></p>
                            </div>
                        </div>

                        <div id="party-list-for-voting" class="hidden mt-6 p-6 bg-gray-50 border border-gray-200 rounded-xl shadow-inner">
                            <h3 class="text-xl font-semibold mb-4 text-gray-800">Select a Party to Vote For:</h3>
                            <!-- Party Search Input -->
                            <div class="mb-4">
                                <label for="party-search-input" class="block text-sm font-medium text-gray-700 mb-1">Search Party by Name, Leader, or Symbol:</label>
                                <input type="text" id="party-search-input" placeholder="e.g., Sovereign, Yash, Lion" class="input-field w-full">
                            </div>
                            <div id="party-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                                <!-- Party cards will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Candidate Login -->
                <div id="content-candidate-login" class="tab-content hidden">
                    <h2 class="text-3xl font-bold mb-6 text-gray-800">Candidate Login</h2>
                    <div id="party-management-login-section" class="p-6 bg-gray-50 border border-gray-200 rounded-xl shadow-inner">
                        <form id="party-login-form" class="space-y-4">
                            <div>
                                <label for="login-party-name" class="block text-sm font-medium text-gray-700">Party Name:</label>
                                <input type="text" id="login-party-name" class="input-field w-full" required>
                            </div>
                            <div>
                                <label for="login-party-password" class="block text-sm font-medium text-gray-700">Password:</label>
                                <input type="password" id="login-party-password" class="input-field w-full" required>
                            </div>
                            <button type="submit" class="action-button w-full">Login</button>
                        </form>
                    </div>
                    <div id="candidate-dashboard" class="mt-6 p-6 bg-blue-50 border border-blue-200 rounded-xl shadow-inner hidden">
                        <!-- Candidate dashboard content will be loaded here -->
                        <button id="logout-candidate-btn" class="action-button bg-red-600 hover:bg-red-700 w-full mt-4">Logout</button>
                    </div>
                </div>

                <!-- Tab Content: Register Candidate -->
                <div id="content-register-candidate" class="tab-content hidden">
                    <h2 class="text-3xl font-bold mb-6 text-gray-800">Register New Candidate</h2>
                    <div class="p-6 bg-gray-50 border border-gray-200 rounded-xl shadow-inner">
                        <form id="register-candidate-form" class="space-y-4">
                            <div>
                                <label for="candidate-name" class="block text-sm font-medium text-gray-700">Candidate Name:</label>
                                <input type="text" id="candidate-name" class="input-field w-full" required>
                            </div>
                            <div>
                                <label for="party-name-reg" class="block text-sm font-medium text-gray-700">Party Name:</label>
                                <input type="text" id="party-name-reg" class="input-field w-full" required>
                            </div>
                            <div>
                                <label for="party-password-reg" class="block text-sm font-medium text-gray-700">Party Password:</label>
                                <input type="password" id="party-password-reg" class="input-field w-full" required>
                            </div>
                            <div>
                                <label for="party-chinn" class="block text-sm font-medium text-gray-700">Party Symbol (Text/Emoji):</label>
                                <input type="text" id="party-chinn" class="input-field w-full" required>
                            </div>
                            <div>
                                <label for="party-logo-upload" class="block text-sm font-medium text-gray-700">Party Logo:</label>
                                <input type="file" id="party-logo-upload" accept="image/*" class="hidden">
                                <button type="button" id="upload-logo-btn" class="action-button mt-1">Upload Logo</button>
                                <img id="logo-preview" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAQAAADa613fAAAAaElEQVR42u3PQREAAAgDoC2G/Yt62e20IIDz9wYBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgMDbA3cAAR2gLdJPAAAAAElFTSuQmCC" alt="Logo Preview" class="mt-2 w-24 h-24 object-cover rounded-md border border-gray-300">
                            </div>
                            <button type="submit" class="action-button w-full">Register Party</button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Sidebar: Live Vote Count -->
            <div class="sidebar-area">
                <h2 class="text-3xl font-bold mb-6 text-gray-800">Live Vote Count</h2>
                <div id="live-vote-count" class="space-y-3">
                    <!-- Live vote counts will be displayed here -->
                </div>
            </div>
        </div>

        <!-- App Controls -->
        <div id="app-controls" class="absolute bottom-4 right-4 flex flex-col gap-2">
            <button id="logout-button" class="action-button logout-button">Logout</button>
        </div>
    </div>

    <!-- Custom Alert Modal -->
    <div id="custom-alert-modal" class="custom-alert-modal">
        <div class="custom-alert-content">
            <p id="alert-message" class="text-lg font-semibold mb-4"></p>
            <button id="alert-ok-btn" class="action-button alert-ok-button">OK</button>
        </div>
    </div>
    
    <!-- Custom JS -->
    <script src="script.js"></script>
</body>
</html>
